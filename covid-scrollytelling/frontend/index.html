<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="An interactive scrollytelling visualization of COVID-19's global spread from 2020-2024"
    />
    <title>COVID-19: The Invisible Epidemic</title>

    <!-- Google Fonts - Press Start 2P for retro aesthetic -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Shared Styles & Components -->
    <link rel="stylesheet" href="/shared/styles/eject-button.css" />
    <script src="/shared/components/EjectButton.js"></script>

    <!-- External Libraries -->
    <!-- D3.js for map visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- TopoJSON for map data -->
    <script src="https://unpkg.com/topojson@3"></script>
    <!-- Scrollama for scrollytelling -->
    <script src="https://unpkg.com/scrollama@3.2.0/build/scrollama.min.js"></script>

    <!-- Preload critical data -->
    <link rel="preload" href="data/covid-data.json" as="fetch" crossorigin />
    <link rel="preload" href="data/world-110m.json" as="fetch" crossorigin />
  </head>

  <body>
    <!-- Navigation - Eject Button (Dark Theme) -->
    <eject-button theme="dark"></eject-button>

    <!-- Loading Screen -->
    <div id="loading-screen">
      <div class="loader">
        <div class="spinner"></div>
        <div class="loading-text">Loading COVID-19 Data...</div>
        <div class="loading-subtext">This may take a moment</div>
      </div>
    </div>

    <!-- Stats Overlay (Fixed Top Left) -->
    <div id="stats-overlay">
      <div class="stat-box">
        <div class="stat-label">Total Cases</div>
        <div id="total-cases" class="stat-value" data-value="0">0</div>
      </div>
      <div class="stat-box">
        <div class="stat-label">Total Deaths</div>
        <div id="total-deaths" class="stat-value" data-value="0">0</div>
      </div>
    </div>

    <!-- Timeline (Fixed Right Side) -->
    <div id="timeline">
      <!-- Will be populated by JavaScript -->
    </div>

    <!-- Sticky Map Container -->
    <div id="map-container">
      <!-- SVG map will be inserted here -->
      <!-- Event cards will appear here -->
      <div id="event-cards-container"></div>
    </div>

    <!-- Narrative Card (Fixed Bottom) -->
    <div id="narrative-card">
      <div class="narrative-content">
        <p id="narrative-subtitle">December 2019</p>
        <p id="narrative-text">
          In late December 2019, mysterious pneumonia cases emerged in Wuhan, China. The world was just beginning to
          take notice of what would become the most significant pandemic in a century.
        </p>
        <div class="scroll-indicator">
          <div class="scroll-arrow">â†“</div>
          <div class="scroll-text">Scroll to explore</div>
        </div>
      </div>
    </div>

    <!-- Scroll Content (Empty Spacers) -->
    <div id="scroll-content">
      <!-- Scene 0: Introduction -->
      <section class="scroll-section" data-scene="0"></section>

      <!-- Scene 1: Asian Spread -->
      <section class="scroll-section" data-scene="1"></section>

      <!-- Scene 2: Europe Becomes Epicenter -->
      <section class="scroll-section" data-scene="2"></section>

      <!-- Scene 3: Global Lockdowns -->
      <section class="scroll-section" data-scene="3"></section>

      <!-- Scene 4: Americas Crisis -->
      <section class="scroll-section" data-scene="4"></section>

      <!-- Scene 5: Second Wave -->
      <section class="scroll-section" data-scene="5"></section>

      <!-- Scene 6: A Glimmer of Hope -->
      <section class="scroll-section" data-scene="6"></section>

      <!-- Scene 7: India's Crisis -->
      <section class="scroll-section" data-scene="7"></section>

      <!-- Scene 8: Delta Goes Global -->
      <section class="scroll-section" data-scene="8"></section>

      <!-- Scene 9: Omicron Wave -->
      <section class="scroll-section" data-scene="9"></section>

      <!-- Scene 10: Living With COVID -->
      <section class="scroll-section" data-scene="10"></section>

      <!-- Scene 11: Emergency Ends -->
      <section class="scroll-section" data-scene="11"></section>

      <!-- Scene 12: The New Normal -->
      <section class="scroll-section" data-scene="12"></section>
    </div>

    <!-- Main Application Script (ES Module) -->
    <script type="module" src="js/app.js"></script>
  </body>
</html>
